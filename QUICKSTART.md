# Быстрый старт

## Шаг 1: Установка зависимостей

```bash
npm install
```

## Шаг 2: Настройка переменных окружения

Создайте файл `.env.local`:

```bash
cp .env.local.example .env.local
```

Заполните его своими данными:

```env
# Supabase (https://supabase.com)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# OpenAI (https://platform.openai.com)
OPENAI_API_KEY=sk-your-api-key
```

## Шаг 3: Инициализация базы данных Supabase

1. Создайте проект на [supabase.com](https://supabase.com)
2. Зайдите в SQL Editor
3. Скопируйте и выполните содержимое файла `supabase/schema.sql`

## Шаг 4: Запуск локального сервера

```bash
npm run dev
```

Откройте [http://localhost:3000](http://localhost:3000)

## Первые шаги в приложении

### 1. Подключите Google Sheets

1. Перейдите в Dashboard → Источники данных
2. Нажмите "Добавить источник"
3. Выберите "Google Sheets"
4. Вставьте URL вашей таблицы (должна быть публичной!)
5. Укажите название листа (например, "Лист1")

**Пример структуры таблицы:**

| date       | campaign      | source   | impressions | clicks | spend |
|------------|---------------|----------|-------------|--------|-------|
| 2026-01-01 | Brand Promo   | Facebook | 10000       | 250    | 500   |
| 2026-01-01 | Sales Q1      | Google   | 8000        | 180    | 450   |
| 2026-01-02 | Brand Promo   | Facebook | 12000       | 300    | 600   |

### 2. Создайте датасет

1. Перейдите в Dashboard → Датасеты
2. Нажмите "Создать датасет"
3. Выберите подключенный источник данных
4. Настройте поля:
   - `date` → Дата
   - `campaign` → Строка
   - `impressions` → Целое число
   - `clicks` → Целое число
   - `spend` → Дробное число
5. Добавьте вычисляемое поле "CPC":
   - Формула: `{spend} / {clicks}`
   - Тип: Дробное число

### 3. Создайте сводную таблицу

1. Перейдите в Dashboard → Сводные таблицы
2. Нажмите "Создать таблицу"
3. Выберите датасет
4. Настройте группировки:
   - Строки: `date` (по дням)
   - Строки: `campaign`
5. Настройте метрики:
   - Сумма: `impressions`
   - Сумма: `clicks`
   - Сумма: `spend`
   - Среднее: `CPC`

### 4. Получите AI-анализ

1. Перейдите в Dashboard → AI-анализ
2. Выберите датасет
3. Напишите промпт, например:

```
Проанализируй эффективность кампаний за последнюю неделю.
Обрати внимание на:
- Какие кампании имеют лучший CTR
- Где самый высокий CPC
- Какие кампании стоит масштабировать

Дай конкретные рекомендации по оптимизации бюджета.
```

4. Нажмите "Анализировать"

## Полезные ссылки

- [Документация Next.js](https://nextjs.org/docs)
- [Документация Supabase](https://supabase.com/docs)
- [Документация OpenAI](https://platform.openai.com/docs)
- [Tailwind CSS](https://tailwindcss.com/docs)

## Примеры промптов для AI

### Анализ эффективности
```
Проанализируй эффективность рекламных кампаний.
Какие кампании дают лучший ROI?
```

### Поиск проблем
```
Найди кампании с высоким CPC и низкой конверсией.
Почему это происходит и как это исправить?
```

### Временные паттерны
```
Проанализируй динамику по дням недели.
В какие дни показатели лучше и почему?
```

### Сравнение источников
```
Сравни эффективность Facebook и Google Ads.
Куда стоит перераспределить бюджет?
```

## Troubleshooting

### Google Sheets не подключается

- Убедитесь, что таблица публичная (Файл → Доступ → Доступ по ссылке)
- Проверьте правильность URL и названия листа
- Таблица должна содержать данные

### Ошибка "OpenAI API key is not configured"

- Проверьте, что добавили `OPENAI_API_KEY` в `.env.local`
- Перезапустите dev-сервер (`npm run dev`)

### Ошибка подключения к Supabase

- Проверьте URL и ключ в `.env.local`
- Убедитесь, что выполнили SQL из `supabase/schema.sql`
